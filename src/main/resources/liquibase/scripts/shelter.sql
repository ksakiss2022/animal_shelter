-- liquibase formatted sql

-- changeset lumlum:1
CREATE SCHEMA IF NOT EXISTS cat;
create table if not exists cat
(
    id            BIGINT generated by default as identity primary key,
    breed         TEXT             NOT NULL,
    name_cat       TEXT             NOT NULL,
    year_of_birth INT             NOT NULL,
    description   TEXT            NOT NULL
);


-- changeset skorobeynikova:2

CREATE SCHEMA IF NOT EXISTS dog;
CREATE TABLE IF NOT EXISTS dog
(
    id                BIGINT generated by default as identity primary key,
    breed             TEXT NOT NULL,
    name_dog          TEXT NOT NULL,
    year_of_birth_dog INT  NOT NULL,
    description       TEXT NOT NULL
);


CREATE SCHEMA IF NOT EXISTS person_cat;
CREATE TABLE IF NOT EXISTS person_cat
(
    id            BIGINT generated by default as identity primary key,
    name          TEXT   NOT NULL,
    phone         TEXT   NOT NULL,
    year_of_birth INT    NOT NULL,
    mail          TEXT   NOT NULL,
    address       TEXT   NOT NULL,
    chat_id       BIGINT NOT NULL
);

CREATE SCHEMA IF NOT EXISTS person_dog;
CREATE TABLE IF NOT EXISTS person_dog
(
    id            BIGINT generated by default as identity primary key,
    name          TEXT   NOT NULL,
    phone         TEXT   NOT NULL,
    year_of_birth INT    NOT NULL,
    mail          TEXT   NOT NULL,
    address       TEXT   NOT NULL,
    chat_id       BIGINT NOT NULL
);

-- changeset lumlum:3
ALTER TABLE person_dog
    ADD dog_id BIGINT NOT NULL UNIQUE;

ALTER TABLE person_cat
    ADD cat_id BIGINT NOT NULL UNIQUE;

ALTER TABLE dog
    ADD FOREIGN KEY (id) REFERENCES person_dog (dog_id);

ALTER TABLE cat
    ADD FOREIGN KEY (id) REFERENCES person_cat (cat_id);









